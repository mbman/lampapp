<VirtualHost *:80>
    ServerAdmin admin@localhost
    ServerName <%= @name %>.dev
    ServerAlias www.<%= @name %>.dev *.<%= @name %>.dev  *.<%= @name %>.*

    DocumentRoot <%= @path %>
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory <%= @path %>>
        SetEnv APPLICATION_ENV "development"
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from All
    </Directory>

    LogLevel info

    ErrorLog <%= node['apache']['log_dir'] %>/<%= @name %>-error.log
    CustomLog <%= node['apache']['log_dir'] %>/<%= @name %>-access.log combined

</VirtualHost>
<VirtualHost *:443>
    ServerAdmin admin@localhost
    ServerName <%= @name %>.dev
    ServerAlias www.<%= @name %>.dev *.<%= @name %>.dev  *.<%= @name %>.*

    DocumentRoot <%= @path %>
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory <%= @path %>>
        SetEnv APPLICATION_ENV "development"
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from All
    </Directory>
    
    LogLevel info

    ErrorLog <%= node['apache']['log_dir'] %>/<%= @name %>-ssl-error.log
    CustomLog <%= node['apache']['log_dir'] %>/<%= @name %>-ssl-access.log combined

    SSLEngine on
    SSLOptions +StrictRequire
    SSLCertificateFile /etc/apache2/ssl/server.crt
    SSLCertificateKeyFile /etc/apache2/ssl/server.key
</VirtualHost>
